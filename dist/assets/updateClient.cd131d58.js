import{u as x,r as y,a as b,e as v,n as N}from"./index.esm.62fe7dd2.js";import{s as k}from"./vue-multiselect.css_vue_type_style_index_0_src_true_lang.f9054df5.js";import{_ as w,a as p,r as C,o as n,c as d,b as e,w as U,g as a,v as c,F as h,f,e as g,C as V,t as m}from"./index.8713e1d8.js";import{D}from"./datetime.5c040712.js";const E={props:["id"],components:{VueMultiselect:k},setup(){return{v$:x({$autoDirty:!0})}},data(){return{eventsChosen:[],eventData:[],client:{firstName:"",middleName:"",lastName:"",email:"",phoneNumbers:[{primaryPhone:"",secondaryPhone:""}],address:{line1:"",line2:"",city:"",county:"",zip:""}},clientEvents:[]}},mounted(){window.scrollTo(0,0)},beforeMount(){p.get(`https://cis4339project7.herokuapp.com//primarydata/id/${this.$route.params.id}`).then(i=>{let t=i.data;this.client.firstName=t.firstName,this.client.middleName=t.middleName,this.client.lastName=t.lastName,this.client.email=t.email,this.client.phoneNumbers[0].primaryPhone=t.phoneNumbers[0].primaryPhone,this.client.phoneNumbers[0].secondaryPhone=t.phoneNumbers[0].secondaryPhone,this.client.address.line1=t.address.line1,this.client.address.line2=t.address.line2,this.client.address.city=t.address.city,this.client.address.county=t.address.county,this.client.address.zip=t.address.zip}),p.get(`https://cis4339project7.herokuapp.com//primarydata/events/${this.$route.params.id}`).then(i=>{i.data.forEach(l=>{this.clientEvents.push({eventName:l.eventName,eventDate:l.date})})}),p.get("https://cis4339project7.herokuapp.com//eventdata").then(i=>{let t=i.data;for(let l=0;l<t.length;l++)this.eventData.push({eventName:t[l].eventName,_id:t[l]._id,attendees:t[l].attendees})})},methods:{formattedDate(i){return D.fromISO(i).plus({days:1}).toLocaleString()},async handleClientUpdate(){if(await this.v$.$validate()){let t=`https://cis4339project7.herokuapp.com//primarydata/updateclient/${this.id}`;p.put(t,this.client).then(l=>{alert(JSON.stringify(l.data)),this.$router.back().catch(r=>{console.log(r)})})}},deleteClient(){this.eventData.forEach(t=>{let l="https://cis4339project7.herokuapp.com//eventdata/removeattendees/"+t._id;p.put(l,{attendee:this.id})});let i=`https://cis4339project7.herokuapp.com//primarydata/primarydatadel/${this.id}`;p.delete(i,this.client).then(t=>{alert(JSON.stringify(t.data)),this.$router.back().catch(l=>{console.log(l)})})},addToEvent(){this.eventsChosen.forEach(i=>{let t="https://cis4339project7.herokuapp.com//eventdata/addAttendee/"+i._id;p.put(t,{attendee:this.$route.params.id}).then(l=>{alert(JSON.stringify(l.data)),this.$router.back().catch(r=>{console.log(r)})})})}},validations(){return{client:{firstName:{required:y,alpha:b},lastName:{required:y,alpha:b},email:{email:v},phoneNumbers:[{primaryPhone:{required:y,numeric:N}}]}}}},P=e("div",{style:{"border-radius":"7px",border:"2px solid black"}},[e("h1",{class:"font-bold text-4xl text-red-700 tracking-widest text-center mt-10"},"Update Client")],-1),j={class:"px-10 py-20",style:{background:`linear-gradient(140deg, #ffffff\r
 70%, #BEC4D4 50.6%)`,"border-radius":"7px",border:"2.5px solid black"}},S={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-x-6 gap-y-10"},L=e("h2",{class:"text-2xl font-bold"},"Personal Details",-1),z={class:"flex flex-col"},F={class:"block"},M=e("span",{class:"text-gray-700"},"First Name",-1),A=e("span",{style:{color:"#ff0000"}},"*",-1),T={key:0,class:"text-black"},B={class:"flex flex-col"},O={class:"block"},R=e("span",{class:"text-gray-700"},"Middle Name",-1),$={class:"flex flex-col"},J={class:"block"},q=e("span",{class:"text-gray-700"},"Last Name",-1),G=e("span",{style:{color:"#ff0000"}},"*",-1),I={key:0,class:"text-black"},Z=e("div",null,null,-1),H={class:"flex flex-col"},K={class:"block"},Q=e("span",{class:"text-gray-700"},"Email",-1),W={key:0,class:"text-black"},X={class:"flex flex-col"},Y={class:"block"},ee=e("span",{class:"text-gray-700"},"Phone Number",-1),te=e("span",{style:{color:"#ff0000"}},"*",-1),se={key:0,class:"text-black"},oe={class:"flex flex-col"},le={class:"block"},ie=e("span",{class:"text-gray-700"},"Alternative Phone Number",-1),ne={class:"mt-10 grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-x-6 gap-y-10"},de=e("h2",{class:"text-2xl font-bold"},"Address Details",-1),re={class:"flex flex-col"},ae={class:"block"},ce=e("span",{class:"text-gray-700"},"Address Line 1",-1),ue={class:"flex flex-col"},pe={class:"block"},me=e("span",{class:"text-gray-700"},"Address Line 2",-1),he={class:"flex flex-col"},fe={class:"block"},ge=e("span",{class:"text-gray-700"},"City",-1),ye=e("span",{style:{color:"#ff0000"}},"*",-1),be=e("div",null,null,-1),_e={class:"flex flex-col"},xe={class:"block"},ve=e("span",{class:"text-gray-700"},"County",-1),Ne={class:"flex flex-col"},ke={class:"block"},we=e("span",{class:"text-gray-700"},"Zip Code",-1),Ce=e("div",null,null,-1),Ue={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-x-6 gap-y-10"},Ve={class:"flex justify-between mt-10 mr-20"},De={class:"flex justify-between mt-10 mr-20"},Ee={class:"flex justify-between mt-10 mr-20"},Pe=e("hr",{class:"mt-10 mb-10"},null,-1),je={class:"mt-10 grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-x-6 gap-y-10"},Se=e("h2",{class:"text-2xl font-bold"},"Events for Client",-1),Le={class:"flex flex-col col-span-2"},ze={class:"min-w-full shadow-md rounded",style:{border:".5px solid black"}},Fe=e("thead",{class:"bg-gray-50 text-xl"},[e("tr",null,[e("th",{style:{border:".5px solid black"},class:"p-4 text-left"},"Event Name"),e("th",{style:{border:".5px solid black"},class:"p-4 text-left"},"Date")])],-1),Me={class:"divide-y divide-gray-300"},Ae={class:"p-2 text-left"},Te={class:"p-2 text-left"},Be={class:"flex flex-col"},Oe=e("label",{class:"typo__label"},"Select Events to be added",-1),Re={class:"flex justify-between"};function $e(i,t,l,r,o,u){const _=C("VueMultiselect");return n(),d("main",null,[P,e("div",j,[e("form",{onSubmit:t[16]||(t[16]=U((...s)=>i.handleSubmitForm&&i.handleSubmitForm(...s),["prevent"]))},[e("div",S,[L,e("div",z,[e("label",F,[M,A,a(e("input",{type:"text",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50",placeholder:"","onUpdate:modelValue":t[0]||(t[0]=s=>o.client.firstName=s)},null,512),[[c,o.client.firstName]]),r.v$.client.firstName.$error?(n(),d("span",T,[(n(!0),d(h,null,f(r.v$.client.firstName.$errors,s=>(n(),d("p",{class:"text-red-700",key:s.$uid},m(s.$message)+"!",1))),128))])):g("",!0)])]),e("div",B,[e("label",O,[R,a(e("input",{type:"text",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50",placeholder:"","onUpdate:modelValue":t[1]||(t[1]=s=>o.client.middleName=s)},null,512),[[c,o.client.middleName]])])]),e("div",$,[e("label",J,[q,G,a(e("input",{type:"text",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50",placeholder:"","onUpdate:modelValue":t[2]||(t[2]=s=>o.client.lastName=s)},null,512),[[c,o.client.lastName]]),r.v$.client.lastName.$error?(n(),d("span",I,[(n(!0),d(h,null,f(r.v$.client.lastName.$errors,s=>(n(),d("p",{class:"text-red-700",key:s.$uid},m(s.$message)+"!",1))),128))])):g("",!0)])]),Z,e("div",H,[e("label",K,[Q,a(e("input",{type:"email",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50",pattern:"[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,}$","onUpdate:modelValue":t[3]||(t[3]=s=>o.client.email=s)},null,512),[[c,o.client.email]]),r.v$.client.email.$error?(n(),d("span",W,[(n(!0),d(h,null,f(r.v$.client.email.$errors,s=>(n(),d("p",{class:"text-red-700",key:s.$uid},m(s.$message)+"!",1))),128))])):g("",!0)])]),e("div",X,[e("label",Y,[ee,te,a(e("input",{type:"text",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50",pattern:"[0-9]{3}[0-9]{3}[0-9]{4}","onUpdate:modelValue":t[4]||(t[4]=s=>o.client.phoneNumbers[0].primaryPhone=s)},null,512),[[c,o.client.phoneNumbers[0].primaryPhone]]),r.v$.client.phoneNumbers[0].primaryPhone.$error?(n(),d("span",se,[(n(!0),d(h,null,f(r.v$.client.phoneNumbers[0].primaryPhone.$errors,s=>(n(),d("p",{class:"text-red-700",key:s.$uid},m(s.$message)+"!",1))),128))])):g("",!0)])]),e("div",oe,[e("label",le,[ie,a(e("input",{type:"text",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50",pattern:"[0-9]{3}[0-9]{3}[0-9]{4}","onUpdate:modelValue":t[5]||(t[5]=s=>o.client.phoneNumbers[0].secondaryPhone=s)},null,512),[[c,o.client.phoneNumbers[0].secondaryPhone]])])])]),e("div",ne,[de,e("div",re,[e("label",ae,[ce,a(e("input",{type:"text",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50","onUpdate:modelValue":t[6]||(t[6]=s=>o.client.address.line1=s)},null,512),[[c,o.client.address.line1]])])]),e("div",ue,[e("label",pe,[me,a(e("input",{type:"text",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50","onUpdate:modelValue":t[7]||(t[7]=s=>o.client.address.line2=s)},null,512),[[c,o.client.address.line2]])])]),e("div",he,[e("label",fe,[ge,ye,a(e("input",{type:"text",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50","onUpdate:modelValue":t[8]||(t[8]=s=>o.client.address.city=s)},null,512),[[c,o.client.address.city]])])]),be,e("div",_e,[e("label",xe,[ve,a(e("input",{type:"text",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50","onUpdate:modelValue":t[9]||(t[9]=s=>o.client.address.county=s)},null,512),[[c,o.client.address.county]])])]),e("div",Ne,[e("label",ke,[we,a(e("input",{type:"text",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50","onUpdate:modelValue":t[10]||(t[10]=s=>o.client.address.zip=s)},null,512),[[c,o.client.address.zip]])])]),Ce]),e("div",Ue,[e("div",Ve,[e("button",{onClick:t[11]||(t[11]=(...s)=>u.handleClientUpdate&&u.handleClientUpdate(...s)),type:"submit",class:"bg-red-700 text-white rounded"},"Update Client")]),e("div",De,[e("button",{onClick:t[12]||(t[12]=(...s)=>u.deleteClient&&u.deleteClient(...s)),type:"submit",class:"bg-red-700 text-white rounded"},"Delete Client")]),e("div",Ee,[e("button",{type:"reset",class:"border border-red-700 bg-white text-red-700 rounded",onClick:t[13]||(t[13]=s=>i.$router.go(-1))},"Go back")])]),Pe,e("div",je,[Se,e("div",Le,[e("table",ze,[Fe,e("tbody",Me,[(n(!0),d(h,null,f(o.clientEvents,s=>(n(),d("tr",{key:s._id},[e("td",Ae,m(s.eventName),1),e("td",Te,m(u.formattedDate(s.eventDate)),1)]))),128))])])]),e("div",Be,[Oe,V(_,{class:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50",modelValue:o.eventsChosen,"onUpdate:modelValue":t[14]||(t[14]=s=>o.eventsChosen=s),options:o.eventData,multiple:!0,searchable:!1,allowempty:!0,"close-on-select":!1,"track-by":"eventName",label:"eventName",style:{border:".5px solid black"}},null,8,["modelValue","options"]),e("div",Re,[e("button",{onClick:t[15]||(t[15]=(...s)=>u.addToEvent&&u.addToEvent(...s)),type:"submit",class:"mt-5 bg-red-700 text-white rounded"},"Add Client to Events")])])])],32)])])}const Ze=w(E,[["render",$e]]);export{Ze as default};
