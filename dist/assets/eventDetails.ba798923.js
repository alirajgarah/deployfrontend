import{u as x,r as v}from"./index.esm.012be9aa.js";import{_ as k,a as p,r as w,o as r,c as a,b as e,w as C,g as l,v as c,F as m,f as g,e as b,I as f,C as S,t as h}from"./index.8425ce06.js";import{D as y}from"./datetime.5c040712.js";import{s as N}from"./vue-multiselect.css_vue_type_style_index_0_src_true_lang.e648c6fc.js";const D={props:["id"],components:{VueMultiselect:N},setup(){return{v$:x({$autoDirty:!0})}},data(){return{clientsChosen:[],eventClients:[],attendeeIDs:[],attendeeData:[],checkedServices:[],event:{eventName:"",services:[],date:"",address:{line1:"",line2:"",city:"",county:"",zip:""},description:""}}},beforeMount(){p.get(`https://cis4339project7.herokuapp.com/eventdata/id/${this.$route.params.id}`).then(i=>{let t=i.data[0];this.event.eventName=t.eventName,console.log(t.date),this.event.date=y.fromISO(t.date).plus({days:1}).toISODate(),this.event.description=t.description,this.checkedServices=t.services,this.event.address=t.address,this.attendeeIDs=t.attendees;for(let d=0;d<this.attendeeIDs.length;d++)p.get(`https://cis4339project7.herokuapp.com/primarydata/id/${this.attendeeIDs[d]}`).then(n=>{let o=n.data;this.attendeeData.push({attendeeID:this.attendeeIDs[d],attendeeFirstName:o.firstName,attendeeLastName:o.lastName,attendeeCity:o.address.city,attendeePhoneNumber:o.phoneNumbers[0].primaryPhone})})}),p.get(`https://cis4339project7.herokuapp.com/eventdata/id/${this.$route.params.id}`).then(i=>{let t=i.data[0];this.attendeeIDs=t.attendees;for(let d=0;d<this.attendeeIDs.length;d++)p.get(`https://cis4339project7.herokuapp.com/primarydata/id/${this.attendeeIDs[d]}`).then(n=>{let o=n.data;this.eventClients.push({clientID:this.attendeeIDs[d],clientName:o.firstName+" "+o.lastName})})})},methods:{formattedDate(i){return y.fromISO(i).plus({days:1}).toLocaleString()},async handleEventUpdate(){if(await this.v$.$validate()){this.event.services=this.checkedServices;let t=`https://cis4339project7.herokuapp.com/eventdata/${this.id}`;p.put(t,this.event).then(d=>{alert(JSON.stringify(d.data)),this.$router.back().catch(n=>{console.log(n)})})}},deleteEvent(){let i=`https://cis4339project7.herokuapp.com/eventdata/eventdata/${this.id}`;p.delete(i,this.client).then(t=>{alert(JSON.stringify(t.data)),this.$router.back().catch(d=>{console.log(d)})})},editClient(i){this.$router.push({name:"updateclient",params:{id:i}})},removeFromEvent(){let i=`https://cis4339project7.herokuapp.com/eventdata/removeattendees/${this.$route.params.id}`;p.put(i,{attendee:this.clientsChosen.clientID}),alert("Client has been removed from event."),this.$router.back().catch(t=>{console.log(t)})}},validations(){return{event:{eventName:{required:v},date:{required:v}}}}},E=e("div",{style:{"border-radius":"7px",border:"2px solid black"}},[e("h1",{class:"font-bold text-4xl text-red-700 tracking-widest text-center mt-10"},"Update Event")],-1),V={class:"px-10 py-20",style:{background:`linear-gradient(140deg, #ffffff\r
 70%, #BEC4D4 50.6%)`,"border-radius":"7px",border:"2.5px solid black"}},U={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-x-6 gap-y-10"},I=e("h2",{class:"text-2xl font-bold"},"Event Details",-1),F={class:"flex flex-col"},j={class:"block"},L=e("span",{class:"text-gray-700"},"Event Name",-1),M=e("span",{style:{color:"#ff0000"}},"*",-1),A={key:0,class:"text-black"},O={class:"flex flex-col"},P={class:"block"},B=e("span",{class:"text-gray-700"},"Date",-1),R=e("span",{style:{color:"#ff0000"}},"*",-1),z={key:0,class:"text-black"},J=e("div",null,null,-1),T=e("div",null,null,-1),Y={class:"flex flex-col"},q={class:"block"},G=e("span",{class:"text-gray-700"},"Description",-1),Z=e("div",null,null,-1),H=e("div",null,null,-1),K=e("div",null,null,-1),Q={class:"flex flex-col grid-cols-3"},W=e("label",null,"Services Offered at Event",-1),X={for:"familySupport",class:"inline-flex items-center"},$=e("span",{class:"ml-2"},"Family Support",-1),ee={for:"adultEducation",class:"inline-flex items-center"},te=e("span",{class:"ml-2"},"Adult Education",-1),se={for:"youthServices",class:"inline-flex items-center"},oe=e("span",{class:"ml-2"},"Youth Services Program",-1),ie={for:"childhoodEducation",class:"inline-flex items-center"},de=e("span",{class:"ml-2"},"Early Childhood Education",-1),le={class:"mt-10 grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-x-6 gap-y-10"},ne=e("h2",{class:"text-2xl font-bold"},"Address",-1),re={class:"flex flex-col"},ae={class:"block"},ce=e("span",{class:"text-gray-700"},"Address Line 1",-1),ue={class:"flex flex-col"},pe={class:"block"},he=e("span",{class:"text-gray-700"},"Address Line 2",-1),fe={class:"flex flex-col"},me={class:"block"},ge=e("span",{class:"text-gray-700"},"City",-1),ve=e("div",null,null,-1),be={class:"flex flex-col"},ye={class:"block"},_e=e("span",{class:"text-gray-700"},"County",-1),xe={class:"flex flex-col"},ke={class:"block"},we=e("span",{class:"text-gray-700"},"Zip Code",-1),Ce={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-x-6 gap-y-10"},Se={class:"flex justify-between mt-10 mr-20"},Ne={class:"flex justify-between mt-10 mr-20"},De={class:"flex justify-between mt-10 mr-20"},Ee=e("hr",{class:"mt-10 mb-10"},null,-1),Ve={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-x-6 gap-y-10"},Ue=e("div",null,[e("h2",{class:"text-2xl font-bold"},"List of Attendees"),e("h3",{class:"italic"},"Click table row to edit/display/delete an entry")],-1),Ie={class:"flex flex-col col-span-2"},Fe={class:"min-w-full shadow-md rounded",style:{border:".5px solid black"}},je=e("thead",{class:"bg-gray-50 text-xl"},[e("tr",null,[e("th",{class:"p-4 text-left",style:{border:".5px solid black"}},"Name"),e("th",{class:"p-4 text-left",style:{border:".5px solid black"}},"City"),e("th",{class:"p-4 text-left",style:{border:".5px solid black"}},"Phone Number")])],-1),Le={class:"divide-y divide-gray-300"},Me=["onClick"],Ae={class:"p-2 text-left"},Oe={class:"p-2 text-left"},Pe={class:"p-2 text-left"},Be={class:"flex flex-col"},Re=e("label",{class:"typo__label"},"Select Clients to be removed",-1),ze={class:"flex justify-between"};function Je(i,t,d,n,o,u){const _=w("VueMultiselect");return r(),a("main",null,[E,e("div",V,[e("form",{onSubmit:t[17]||(t[17]=C((...s)=>i.handleSubmitForm&&i.handleSubmitForm(...s),["prevent"]))},[e("div",U,[I,e("div",F,[e("label",j,[L,M,l(e("input",{type:"text",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50","onUpdate:modelValue":t[0]||(t[0]=s=>o.event.eventName=s)},null,512),[[c,o.event.eventName]]),n.v$.event.eventName.$error?(r(),a("span",A,[(r(!0),a(m,null,g(n.v$.event.eventName.$errors,s=>(r(),a("p",{class:"text-red-700",key:s.$uid},h(s.$message)+"!",1))),128))])):b("",!0)])]),e("div",O,[e("label",P,[B,R,l(e("input",{class:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50","onUpdate:modelValue":t[1]||(t[1]=s=>o.event.date=s),type:"date"},null,512),[[c,o.event.date]]),n.v$.event.date.$error?(r(),a("span",z,[(r(!0),a(m,null,g(n.v$.event.date.$errors,s=>(r(),a("p",{class:"text-red-700",key:s.$uid},h(s.$message)+"!",1))),128))])):b("",!0)])]),J,T,e("div",Y,[e("label",q,[G,l(e("textarea",{class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50",rows:"2","onUpdate:modelValue":t[2]||(t[2]=s=>o.event.description=s)},null,512),[[c,o.event.description]])])]),Z,H,K,e("div",Q,[W,e("div",null,[e("label",X,[l(e("input",{type:"checkbox",id:"familySupport",value:"Family Support","onUpdate:modelValue":t[3]||(t[3]=s=>o.checkedServices=s),class:"rounded border-gray-300 text-indigo-600 shadow-sm focus:border-indigo-300 focus:ring focus:ring-offset-0 focus:ring-indigo-200 focus:ring-opacity-50",notchecked:""},null,512),[[f,o.checkedServices]]),$])]),e("div",null,[e("label",ee,[l(e("input",{type:"checkbox",id:"adultEducation",value:"Adult Education","onUpdate:modelValue":t[4]||(t[4]=s=>o.checkedServices=s),class:"rounded border-gray-300 text-indigo-600 shadow-sm focus:border-indigo-300 focus:ring focus:ring-offset-0 focus:ring-indigo-200 focus:ring-opacity-50",notchecked:""},null,512),[[f,o.checkedServices]]),te])]),e("div",null,[e("label",se,[l(e("input",{type:"checkbox",id:"youthServices",value:"Youth Services Program","onUpdate:modelValue":t[5]||(t[5]=s=>o.checkedServices=s),class:"rounded border-gray-300 text-indigo-600 shadow-sm focus:border-indigo-300 focus:ring focus:ring-offset-0 focus:ring-indigo-200 focus:ring-opacity-50",notchecked:""},null,512),[[f,o.checkedServices]]),oe])]),e("div",null,[e("label",ie,[l(e("input",{type:"checkbox",id:"childhoodEducation",value:"Early Childhood Education","onUpdate:modelValue":t[6]||(t[6]=s=>o.checkedServices=s),class:"rounded border-gray-300 text-indigo-600 shadow-sm focus:border-indigo-300 focus:ring focus:ring-offset-0 focus:ring-indigo-200 focus:ring-opacity-50",notchecked:""},null,512),[[f,o.checkedServices]]),de])])])]),e("div",le,[ne,e("div",re,[e("label",ae,[ce,l(e("input",{type:"text",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50",placeholder:"","onUpdate:modelValue":t[7]||(t[7]=s=>o.event.address.line1=s)},null,512),[[c,o.event.address.line1]])])]),e("div",ue,[e("label",pe,[he,l(e("input",{type:"text",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50",placeholder:"","onUpdate:modelValue":t[8]||(t[8]=s=>o.event.address.line2=s)},null,512),[[c,o.event.address.line2]])])]),e("div",fe,[e("label",me,[ge,l(e("input",{type:"text",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50",placeholder:"","onUpdate:modelValue":t[9]||(t[9]=s=>o.event.address.city=s)},null,512),[[c,o.event.address.city]])])]),ve,e("div",be,[e("label",ye,[_e,l(e("input",{type:"text",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50",placeholder:"","onUpdate:modelValue":t[10]||(t[10]=s=>o.event.address.county=s)},null,512),[[c,o.event.address.county]])])]),e("div",xe,[e("label",ke,[we,l(e("input",{type:"text",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50",placeholder:"","onUpdate:modelValue":t[11]||(t[11]=s=>o.event.address.zip=s)},null,512),[[c,o.event.address.zip]])])])]),e("div",Ce,[e("div",Se,[e("button",{onClick:t[12]||(t[12]=(...s)=>u.handleEventUpdate&&u.handleEventUpdate(...s)),type:"submit",class:"bg-red-700 text-white rounded"},"Update Event")]),e("div",Ne,[e("button",{onClick:t[13]||(t[13]=(...s)=>u.deleteEvent&&u.deleteEvent(...s)),type:"submit",class:"bg-red-700 text-white rounded"},"Delete Event")]),e("div",De,[e("button",{type:"reset",class:"border border-red-700 bg-white text-red-700 rounded",onClick:t[14]||(t[14]=s=>i.$router.go(-1))},"Go back")])]),Ee,e("div",Ve,[Ue,e("div",Ie,[e("table",Fe,[je,e("tbody",Le,[(r(!0),a(m,null,g(o.attendeeData,s=>(r(),a("tr",{onClick:Te=>u.editClient(s.attendeeID),key:s._id},[e("td",Ae,h(s.attendeeFirstName+" "+s.attendeeLastName),1),e("td",Oe,h(s.attendeeCity),1),e("td",Pe,h(s.attendeePhoneNumber),1)],8,Me))),128))])])]),e("div",Be,[Re,S(_,{class:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50",modelValue:o.clientsChosen,"onUpdate:modelValue":t[15]||(t[15]=s=>o.clientsChosen=s),options:o.eventClients,multiple:!1,searchable:!1,allowempty:!0,"close-on-select":!0,"track-by":"clientName",label:"clientName",style:{border:".5px solid black"}},null,8,["modelValue","options"]),e("div",ze,[e("button",{onClick:t[16]||(t[16]=(...s)=>u.removeFromEvent&&u.removeFromEvent(...s)),type:"submit",class:"mt-5 bg-red-700 text-white rounded"},"Remove Client from Event")])])])],32)])])}const He=k(D,[["render",Je]]);export{He as default};
